---
layout: post
title: '地基系列(1) - 数据库(1) 数据库系统实现'
date: 2020-07-14
author: HANABI
color: rgb(54,59,64)
tags: 地基系列 DBMS
---

> 整理数据库系统(主要是关系数据库系统[^1])学习过程中的相关知识点，主要学习书籍：[数据库系统实现](https://book.douban.com/subject/4838430/)

## 辅助存储(辅存)管理

在操作一个数据库系统的时候，其本质其实就是对于辅助存储的管理，要了解辅存的相关内容，我们先要了解一些知识：

### 存储器层次

典型的计算机系统包括几个不同的可以储存数据的部件，这些部件中，最小容量的设备提供了最快的访问速度，也具有相对最高的每个字节的价格，这里用一张[知乎回答](https://www.zhihu.com/question/28445273/answer/143956523)上的表格

<table border="1">
    <tr>
        <td rowspan="10">
            存储系统
        </td>
        <td rowspan="6">
            内存存储器(内存，interal memory)
        </td>
        <td>寄存器(register)</td>
        <td>在CPU内部</td>
    </tr>
    <tr>
        <td>高速缓冲处理器(cache)</td>
        <td>现在一般集成在CPU内部</td>
    </tr>
    <tr>
        <td rowspan="4">主存储器(主存，main memory)<br>
            (其最大可利用空间由地址总线宽度决定)
        </td>
        <td>内存条</td>
    </tr>
    <tr>
        <td>显卡中的RAM芯片</td>
    </tr>
    <tr>
        <td>接口卡中ROM芯片</td>
    </tr>
    <tr>
        <td>等等</td>
    </tr>
    <tr>
        <td rowspan="4" colspan="2">外部存储器/辅助存储器(外存(external memory)/辅存(secondary memory))</td>
        <td>
            硬盘
        </td>
    </tr>
    <tr>
        <td>U盘</td>
    </tr>
    <tr>
        <td>光盘</td>
    </tr>
    <tr>
        <td>等等</td>
    </tr>
</table>


#### 在存储器层次间传送数据 

正常情况下，数据在相邻层之间进行传输，我们这里姑且分为：第一层：高速缓存处理器，第二层(主存储器)，第三层(外部存储器)，在第二层和第三层之间访问想要的数据或查找指定的位置用于存储数据会耗费大量时间。

对于理解数据库系统非常重要的知识是，磁盘的最小物理存储单元是**扇区**(物理上的概念)，由于操作系统难以对数目众多的扇区寻址，所以把相邻扇区组合在一起，划分成**磁盘块(簇)**，磁盘块是一个虚拟的概念，是软件上的概念。操作系统以块为单位操作磁盘。整个块被从一个成为缓冲区的连续内存区域中移进移出，加速数据库的关键技术就在于如何安排好数据，使得每次磁盘块中有数据被访问时，访问的块上面有我们需要的所有数据。

#### 易失和非易失存储器

易失的(volatile)和非易失的(nonvolatile)存储器的区别在于能否在断电的情况下保存数据，对于非易失的设备来说，其中的数据往往是可以在不断电的情况下长期保存的，磁和光材料满足这个条件，原则上讲，所有辅存设备都是非易失的，关于这里有一个和DBMS系统很重要的联系是，一个DBMS系统往往要求在修改被存储到辅存之前，其任何修改都不是最终有效的。

#### 虚拟存储器

[虚拟存储器](https://baike.baidu.com/item/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98)，也就是平时说的虚拟内存，在逐渐流行的主存数据库(内存数据库)中被使用，它是一个地址空间，由操作系统管理，其一部分留在内存中，剩下的存储在磁盘中


[^1]: 1970年*Ted Codd*发表了一篇著名的论文(*CODASYL Data Base Task Group April 1971 Report, ACM, New York*)，里面认为数据库系统应该呈现给用户一种被组织成叫做"关系"的表的数据。在幕后，应该有一个复杂的数据结构，允许对各式各样的查询进行快速相应。关系数据库的程序员不需要关心存储及结构。查询可以用很高级的语言来表达，而*SQL(结构化查询语言)*就是这一基于关系模型的最重要的查询语言。

